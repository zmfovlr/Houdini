{"body": [{"indent": 0, "text": ["Whitewater Source"], "type": "title", "extent": [84, 106], "level": 0}, {"indent": 0, "type": "summary", "extent": [106, 184], "text": [" Generates volumes to be used as sources in a whitewater simulation. "]}, {"indent": 0, "type": "para", "extent": [184, 913], "text": ["The Whitewater Source SOP generates an emission field that is used by the\n", {"text": ["Whitewater Solver"], "fullpath": "/nodes/dop/whitewatersolver", "scheme": "Node", "type": "link", "value": "/nodes/dop/whitewatersolver"}, " for birthing particles. Values in\nthe emission field correspond to probabilities that whitewater will appear at\nthat point. One can approximate the amount and location of newly-created\nwhitewater in a frame by visualizing the generated ", {"text": ["emit"], "type": "code"}, " VDB: density of the\nfog is directly related to the birth rate. This node is also able to source\nwhitewater particles using the same method as the\n", {"text": ["Whitewater Solver"], "fullpath": "/nodes/dop/whitewatersolver", "scheme": "Node", "type": "link", "value": "/nodes/dop/whitewatersolver"}, "; these particles are colored based\non their emission criteria, enabling assessment of particle counts, as well as\ntuning of emission controls with concrete visual feedback."]}, {"indent": 0, "type": "para", "extent": [913, 1601], "text": ["In contrast to the previous particle-based sourcing, the new system is\nscale-independent with respect to the underlying liquid simulation.\nConsequently, it is much easier to control the physical amount of whitewater,\nwithout having to consider particle counts. Additionally, the new system is\ndesigned to facilitate full-pipeline prototyping for fluid simulations. That\nis, the artist is free to work with low resolution settings to find a\nsatisfactory overall look for both the liquid and whitewater simulations; the\nparticle count can then be increased for the higher-fidelity final pass on both\nsolvers, without needing to worry about significant changes in the amount of\nwhitewater."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [1607, 1676], "text": ["This operator expects ", {"text": ["surface"], "type": "code"}, " and ", {"text": ["vel"], "type": "code"}, " volumes in its input."]}], "indent": 0, "role": "item", "type": "note", "extent": [1601, 1607]}], "container": true, "role": "item_group", "type": "note_group"}, {"body": [{"body": [{"body": [{"indent": 8, "type": "para", "extent": [1707, 1779], "text": ["Surface and velocity volumes or VDBs from a liquid simulation."]}], "indent": 4, "type": "dt", "extent": [1684, 1707], "text": ["Liquid Simulation"]}, {"body": [{"indent": 8, "type": "para", "extent": [1804, 2030], "text": ["Extra points to splat into the emission volume. The emission amount\n        for each extra source point (indicated by the value of its ", {"text": ["Emission\n        Attribute"], "type": "ui"}, ") is distributed trilinearly to its nearest voxels."]}], "indent": 4, "type": "dt", "extent": [1779, 1804], "text": ["Extra Source Points"]}, {"body": [{"indent": 8, "type": "para", "extent": [2049, 2094], "text": ["Mask to limit the emission regions."]}], "indent": 4, "type": "dt", "extent": [2030, 2049], "text": ["Emission Mask"]}], "container": true, "type": "dt_group"}], "indent": 0, "level": 1, "text": "Inputs", "role": "section", "extent": [1676, 1684], "container": true, "type": "inputs_section", "id": "inputs"}, {"body": [{"body": [{"body": [{"indent": 8, "type": "para", "extent": [2116, 2385], "text": ["Geometry containing the emission volume (", {"text": ["emit"], "type": "code"}, "). If ", {"text": ["Output Volumes"], "type": "ui"}, "\n        is enabled, the geometry also contains liquid\u2019s ", {"text": ["surface"], "type": "code"}, " and ", {"text": ["vel"], "type": "code"}, "\n        fields. If ", {"text": ["Source Particles"], "type": "ui"}, " is enabled, the birthed whitewater\n        particles are also included."]}], "indent": 4, "type": "dt", "extent": [2103, 2116], "text": ["Volumes"]}], "container": true, "type": "dt_group"}], "indent": 0, "level": 1, "text": "Outputs", "role": "section", "extent": [2094, 2103], "container": true, "type": "outputs_section", "id": "outputs"}, {"body": [{"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [2452, 2545], "text": ["When enabled, whitewater will only be emitted within the specified range of\n    depths."]}], "indent": 0, "text": ["Limit by Depth"], "role": "item", "attrs": {"id": "limitbydepth"}, "extent": [2413, 2430], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2587, 2899], "text": ["An attempt will be made to activate the signed distance VDB to ensure that\n    accurate depth readings to the specified limiting values can be made. The\n    ", {"text": ["Maximum Half-Width"], "type": "ui"}, " parameter can be used to limit the number of voxels\n    that get activated, preventing exhaustion of computing resources. "]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [2909, 3006], "text": ["This should be turned on when using Narrow Band, and off for dense SDFs such as oceans."]}], "indent": 4, "role": "item", "type": "note", "extent": [2899, 2909]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Maximum Half-Width"], "role": "item", "attrs": {"id": "maxhalfwidth"}, "extent": [2545, 2565], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3039, 3230], "text": ["All regions of the liquid that have a speed greater than the minimum are\n    eligible to emit whitewater. Regions moving at or above the maximum speed\n    are considered fully emitting."]}], "indent": 0, "text": ["Speed Range"], "role": "item", "attrs": {"id": "speedrange"}, "extent": [3006, 3019], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3263, 3395], "text": ["By default, the speed is mapped linearly to the (0, 1) range. This behavior\n    can be changed by specifying a custom mapping."]}], "indent": 0, "text": ["Remap Speed"], "role": "item", "attrs": {"id": "remapspeed"}, "extent": [3230, 3243], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3434, 3529], "text": ["The final emission probability can be optionally remapped with the\n    ", {"text": ["Emission Ramp"], "type": "ui"}, "."]}], "indent": 0, "text": ["Remap Emission"], "role": "item", "attrs": {"id": "remapemission"}, "extent": [3395, 3411], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Emission"], "extent": [2397, 2413], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [3592, 3750], "text": ["Augment emission rates with the curvature of the surface SDF, which can be\n    an effective criterion for detecting the leading edges of breaking waves."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [3760, 4002], "text": ["High resolution fluid simulations tend to contain fine details that may\n        result in spurious curvature-based sourcing. To eliminate this, consider\n        smoothing out surface field using controls under ", {"text": ["Surface Filtering"], "type": "ui"}, "."]}], "indent": 4, "role": "item", "type": "note", "extent": [3750, 3760]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Emit from Curvature"], "role": "item", "attrs": {"id": "enablecurvature"}, "extent": [3545, 3567], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4043, 4268], "text": ["The angle between the velocity of the particle and the surface normal must\n    be lower than this value for whitewater emission. This limit helps ensure\n    that whitewater is only created on the leading edges of waves."]}], "indent": 0, "text": ["Max Velocity Angle"], "role": "item", "attrs": {"id": "maxvelangle"}, "extent": [4002, 4022], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4309, 4381], "text": ["Range of curvatures that gets mapped to the (0, 1) emission range."]}], "indent": 0, "text": ["Curvature Range"], "role": "item", "attrs": {"id": "curvaturerange"}, "extent": [4268, 4285], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4422, 4559], "text": ["By default, the curvature is mapped linearly to the (0, 1) range. This\n    behaviour can be changed by specifying a custom mapping."]}], "indent": 0, "text": ["Remap Curvature"], "role": "item", "attrs": {"id": "remapcurvature"}, "extent": [4381, 4398], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Curvature"], "extent": [3529, 3545], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [4631, 4987], "text": ["Augment emission rates with the magnitude of acceleration. Acceleration is\n    effective at detecting areas where particles are rejoining existing parts\n    of the fluid, resulting in trapped air that causes whitewater. Note that\n    this uses Eulerian acceleration, which is the time-rate of change of fluid\n    velocity at fixed locations in space."]}], "indent": 0, "text": ["Emit from Acceleration"], "role": "item", "attrs": {"id": "enableacceleration"}, "extent": [4578, 4603], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5034, 5109], "text": ["Range of accelerations that gets mapped to the (0, 1) emission range."]}], "indent": 0, "text": ["Acceleration Range"], "role": "item", "attrs": {"id": "accelerationrange"}, "extent": [4987, 5007], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5156, 5295], "text": ["By default, the acceleration is mapped linearly to the (0, 1) range. This\n    behavior can be changed by specifying a custom mapping."]}], "indent": 0, "text": ["Remap Acceleration"], "role": "item", "attrs": {"id": "remapacceleration"}, "extent": [5109, 5129], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Acceleration"], "extent": [4559, 4578], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [5358, 5600], "text": ["Augment emission rates based on the vorticity (or magnitude of rotation)\n    within the velocity volume. This criterion can be effective in identifying\n    churning areas of the fluid, which generally occur deeper below the\n    surface."]}], "indent": 0, "text": ["Emit from Vorticity"], "role": "item", "attrs": {"id": "enablevorticity"}, "extent": [5311, 5333], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5641, 5714], "text": ["Range of vorticities that gets mapped to the (0, 1) emission range."]}], "indent": 0, "text": ["Vorticity Range"], "role": "item", "attrs": {"id": "vorticityrange"}, "extent": [5600, 5617], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5755, 5891], "text": ["By default, the vorticity is mapped linearly to the (0, 1) range. This\n    behavior can be changed by specifying a custom mapping."]}], "indent": 0, "text": ["Remap Vorticity"], "role": "item", "attrs": {"id": "remapvorticity"}, "extent": [5714, 5731], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Vorticity"], "extent": [5295, 5311], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [5953, 6012], "text": ["Use points of the second input as additional sources."]}], "indent": 0, "text": ["Add Extra Sources"], "role": "item", "attrs": {"id": "extrasources"}, "extent": [5911, 5931], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6034, 6136], "text": ["Only points of the second input that are part of this group will be used\n    for extra emission."]}], "indent": 0, "text": ["Group"], "role": "item", "attrs": {"id": "group"}, "extent": [6012, 6019], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6176, 6350], "text": ["Name of the attribute that stores emission amount for each source point. If\n    the specified attribute does not exist, all points are assumed to be fully\n    emitting."]}], "indent": 0, "text": ["Emission Attribute"], "role": "item", "attrs": {"id": "emitattrib"}, "extent": [6136, 6156], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6385, 6475], "text": ["This parameter controls how extra sourcing is combined with the emission\n    volume."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [6486, 6542], "text": ["Extra emission is added to the original volume."]}], "indent": 4, "type": "dt", "extent": [6475, 6486], "text": [{"text": ["Add"], "type": "code"}]}, {"body": [{"indent": 8, "type": "para", "extent": [6557, 6646], "text": ["Final emission is the maximum of the original volume and extra\n        emission."]}], "indent": 4, "type": "dt", "extent": [6542, 6557], "text": [{"text": ["Maximum"], "type": "code"}]}, {"body": [{"indent": 8, "type": "para", "extent": [6662, 6757], "text": ["Emission in the areas influenced by extra sources is replaced by their\n        value."]}], "indent": 4, "type": "dt", "extent": [6646, 6662], "text": [{"text": ["Override"], "type": "code"}]}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Merge Method"], "role": "item", "attrs": {"id": "mergemethod"}, "extent": [6350, 6364], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Extra Sources"], "extent": [5891, 5911], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [6811, 6941], "text": ["When this option is enabled, the node also outputs the liquid\u2019s signed\n    distance (", {"text": ["surface"], "type": "code"}, ") and velocity (", {"text": ["vel"], "type": "code"}, ") fields."]}], "indent": 0, "text": ["Output Volumes"], "role": "item", "attrs": {"id": "outputvolumes"}, "extent": [6771, 6788], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6972, 7013], "text": ["Voxel size for the emission volume."]}], "indent": 0, "text": ["Voxel Size"], "role": "item", "attrs": {"id": "voxelsize"}, "extent": [6941, 6953], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [7051, 7191], "text": ["Physical size of the emission region; this option can be used to restrict\n    emission to a certain subregion of the fluid simulation."]}], "indent": 0, "text": ["Emission Size"], "role": "item", "attrs": {"id": "boundemission"}, "extent": [7013, 7028], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [7223, 7270], "text": ["Center of the restricted emission region."]}], "indent": 0, "text": ["Emission Center"], "role": "item", "attrs": {"id": "emitt"}, "extent": [7191, 7208], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [7299, 7368], "text": ["Name (or name pattern) of primitive to use as an emission mask."]}], "indent": 0, "text": ["Mask Name"], "role": "item", "attrs": {"id": "maskname"}, "extent": [7270, 7281], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"body": [{"indent": 0, "type": "para", "extent": [7394, 7606], "text": ["The filtering operations in this section can be used to smooth out the surface\nfield before it\u2019s used for generating the emission field. This can be helpful\nfor eliminating noise from curvature-based emission."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [7612, 7691], "text": ["Dilation is performed first, followed by smoothing and, finally, erosion."]}], "indent": 0, "role": "item", "type": "note", "extent": [7606, 7612]}, {"body": [{"indent": 4, "type": "para", "extent": [7697, 7967], "text": ["If ", {"text": ["Output Volumes"], "type": "ui"}, " is enabled, the filtered surface will be exported by\n    this node. Be wary of letting the\n    ", {"text": ["Whitewater Solver"], "fullpath": "/nodes/dop/whitewatersolver", "scheme": "Node", "type": "link", "value": "/nodes/dop/whitewatersolver"}, " use it, however, as aggressive\n    smoothing may give rise to liquid regions that suddenly disappear."]}], "indent": 0, "role": "item", "type": "note", "extent": [7691, 7697]}], "container": true, "role": "item_group", "type": "note_group"}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [7997, 8049], "text": ["The number of voxels to expand the surface by."]}], "indent": 0, "text": ["Dilate"], "role": "item", "attrs": {"id": "dilatevoxels"}, "extent": [7967, 7975], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [8076, 8167], "text": ["Smooth the surface using the specified filter for the given number of\n    iterations."]}], "indent": 0, "text": ["Smooth"], "role": "item", "attrs": {"id": "operation"}, "extent": [8049, 8057], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [8195, 8247], "text": ["The number of voxels to shrink the surface by."]}], "indent": 0, "text": ["Erode"], "role": "item", "attrs": {"id": "erodevoxels"}, "extent": [8167, 8174], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 3, "text": ["Surface Filtering"], "extent": [7368, 7394], "container": true, "type": "h", "id": null}], "indent": 0, "level": 2, "text": ["Volumes"], "extent": [6757, 6771], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [8311, 8520], "text": ["When this option is enabled, whitewater particles will be created using the\n    Whitewater Solver\u2019s method. This can be used to get a concrete idea of\n    emission amount for the generated ", {"text": ["emit"], "type": "code"}, " volume."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [8530, 8704], "text": ["The actual number of particles birthed by the solver may actually be\n        substantially fewer than this approximation if ", {"text": ["Limit Emission"], "type": "ui"}, " is\n        turned on."]}], "indent": 4, "role": "item", "type": "note", "extent": [8520, 8530]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Source Particles"], "role": "item", "attrs": {"id": "createparticles"}, "extent": [8267, 8286], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [8739, 8916], "text": ["Whitewater scale controls the number of particles that are created to fill\n    a given volume; value of this parameter should match ", {"text": ["Whitewater Scale"], "type": "ui"}, "\n    of the solver."]}], "indent": 0, "text": ["Whitewater Scale"], "role": "item", "attrs": {"id": "wwscale"}, "extent": [8704, 8722], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [8957, 9073], "text": ["A modifier on the emission amount; value of this parameter should match\n    ", {"text": ["Emission Amount"], "type": "ui"}, " of the solver."]}], "indent": 0, "text": ["Emission Amount"], "role": "item", "attrs": {"id": "emissionamount"}, "extent": [8916, 8933], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [9114, 9190], "text": ["Color of particles that are birthed as a result of curvature emission."]}], "indent": 0, "text": ["Curvature Color"], "role": "item", "attrs": {"id": "curvaturecolor"}, "extent": [9073, 9090], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [9237, 9316], "text": ["Color of particles that are birthed as a result of acceleration emission."]}], "indent": 0, "text": ["Acceleration Color"], "role": "item", "attrs": {"id": "accelerationcolor"}, "extent": [9190, 9210], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [9357, 9433], "text": ["Color of particles that are birthed as a result of vorticity emission."]}], "indent": 0, "text": ["Vorticity Color"], "role": "item", "attrs": {"id": "vorticitycolor"}, "extent": [9316, 9333], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [9466, 9538], "text": ["Color of particles that are birthed as a result of extra sourcing."]}], "indent": 0, "text": ["Extra Color"], "role": "item", "attrs": {"id": "extracolor"}, "extent": [9433, 9446], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Visualization"], "extent": [8247, 8267], "container": true, "type": "h", "id": null}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "extent": [2385, 2397], "container": true, "type": "parameters_section", "id": "parameters"}, {"body": [{"body": [{"indent": 4, "blevel": 6, "type": "bullet", "extent": [9547, 9600], "text": [{"text": ["Whitewater Solver"], "fullpath": "/nodes/dop/whitewatersolver", "scheme": "Node", "type": "link", "value": "/nodes/dop/whitewatersolver"}]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 1, "text": "Related", "role": "section", "extent": [9538, 9547], "container": true, "type": "related_section", "id": "related"}], "summary": [" Generates volumes to be used as sources in a whitewater simulation. "], "type": "root", "attrs": {"version": null, "namespace": null, "internal": "whitewatersource::2.0", "context": "sop", "type": "node", "icon": "SHELF/whitewater"}, "title": ["Whitewater Source"]}