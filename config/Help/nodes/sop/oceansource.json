{"body": [{"indent": 0, "text": ["Ocean Source"], "type": "title", "extent": [0, 17], "level": 0}, {"indent": 0, "type": "summary", "extent": [110, 202], "text": ["Generates particles and volumes from ocean \"spectrum\" volumes for use in simulations"]}, {"indent": 0, "type": "para", "extent": [202, 427], "text": ["This node uses an ", {"text": ["Ocean Spectrum"], "fullpath": "/nodes/sop/oceanspectrum", "scheme": "Node", "type": "link", "value": "/nodes/sop/oceanspectrum"}, " connected to the first input to generate particles and volumes that can be used to drive ", {"text": ["FLIP"], "fullpath": "/nodes/dop/flipsolver", "scheme": "Node", "type": "link", "value": "/nodes/dop/flipsolver"}, " simulations of ocean splashes, layers, and tanks."]}, {"indent": 0, "type": "para", "extent": [427, 825], "text": ["This node can create thin layers of particles to allow simulation of only a small part of an ocean surface. It can also generate ", {"text": ["boundary layers"], "type": "em"}, " that surround the simulated liquid tank and help suppress wave reflections and preserve water volume and velocity over the duration of the simulation.  These boundary layers also enable animation of the ", {"text": ["Center"], "type": "ui"}, " parameter to track a moving object."]}, {"indent": 0, "type": "para", "extent": [825, 917], "text": ["This node will usually be created via shelf tools that apply one of the following presets:"]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [941, 1349], "text": ["Generates a thin layer of particles on top of a guiding ocean surface. The particles are initialized with ocean velocities. The guiding ocean surface and velocity volumes are used both as a boundary layer and as a guiding surface to drive the thin layer of particles. This preset is most useful for simulating the ocean surface where closely matching the underlying ocean spectrum surface is necessary."]}], "indent": 0, "type": "dt", "extent": [917, 941], "text": [{"text": ["Guided Ocean Layer"], "type": "ui"}]}, {"body": [{"indent": 4, "type": "para", "extent": [1364, 1702], "text": ["Generates a full tank of particles initialized with ocean velocities as well as boundary layer surface and velocity volumes that can be used to update the simulation velocity in the boundary layer.  This preset is most useful for simulations that require a full liquid simulation including interaction with deeper parts of an ocean."]}], "indent": 0, "type": "dt", "extent": [1349, 1364], "text": [{"text": ["Wave Tank"], "type": "ui"}]}, {"body": [{"indent": 4, "type": "para", "extent": [1717, 1956], "text": ["Similar to the output from the ", {"text": ["Particle Fluid Tank"], "fullpath": "/nodes/sop/particlefluidtank", "scheme": "Node", "type": "link", "value": "/nodes/sop/particlefluidtank"}, " with the addition of a boundary layer, allowing particles to exit the simulation and the tank to track a moving object by animating the Center parameter."]}], "indent": 0, "type": "dt", "extent": [1702, 1717], "text": [{"text": ["Flat Tank"], "type": "ui"}]}], "container": true, "type": "dt_group"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [1981, 2037], "text": ["Initialize the parameters to the specified preset."]}], "indent": 0, "text": ["Initialize"], "role": "item", "extent": [1968, 1981], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2058, 2151], "text": ["The smallest distance between any two generated particles in the initial configuration."]}], "indent": 0, "text": ["Particle Separation"], "role": "item", "extent": [2037, 2058], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2165, 2274], "text": ["The amount to oversample the particles.  For example, a value of 2 will create twice as many particles."]}], "indent": 0, "text": ["Oversampling"], "role": "item", "extent": [2151, 2165], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2286, 2400], "text": ["The voxel size of any volumes created will be the product of this parameter and the ", {"text": ["Particle Separation"], "type": "ui"}, "."]}], "indent": 0, "text": ["Grid Scale"], "role": "item", "extent": [2274, 2286], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2406, 2477], "text": ["The size of the set of particles or volumes created by this node."]}], "indent": 0, "text": ["Size"], "role": "item", "extent": [2400, 2406], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2485, 2558], "text": ["The center of the set of particles or volumes created by this node."]}], "indent": 0, "text": ["Center"], "role": "item", "extent": [2477, 2485], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [2605, 2699], "text": ["Generate particles with ocean velocities within the ocean surface and the specified box."]}], "indent": 0, "text": ["Create Particles"], "role": "item", "extent": [2586, 2605], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2712, 2848], "text": ["The top level of the particles ", {"text": ["before"], "type": "em"}, " being deformed by the ocean surface.  A value of zero represents the surface of the ocean."]}], "indent": 0, "text": ["Water Level"], "role": "item", "extent": [2699, 2712], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2861, 2949], "text": ["Fill the bottom of the tank with particles, starting at the ", {"text": ["Water Level"], "type": "ui"}, " value."]}], "indent": 0, "text": ["Fill Volume"], "role": "item", "extent": [2848, 2861], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2961, 3022], "text": ["Specifies the size of the layer of particles to create."]}], "indent": 0, "text": ["Layer Size"], "role": "item", "extent": [2949, 2961], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3049, 3130], "text": ["Specifies the size of the guiding surface applied to the ", {"text": ["FLIP"], "type": "em"}, " simulation."]}], "indent": 0, "text": ["Guiding Surface Thickness"], "role": "item", "extent": [3022, 3049], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3143, 3181], "text": ["Random seed for creating jitter."]}], "indent": 0, "text": ["Jitter Seed"], "role": "item", "extent": [3130, 3143], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3195, 3273], "text": ["The amount of jitter to apply to the positional values of the particles."]}], "indent": 0, "text": ["Jitter Scale"], "role": "item", "extent": [3181, 3195], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3296, 3382], "text": ["Delete any particles inside any collision objects plugged into the second input."]}], "indent": 0, "text": ["Kill Inside Collision"], "role": "item", "extent": [3273, 3296], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Particles"], "extent": [2558, 2586], "container": true, "type": "h", "id": "particles"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [3414, 3613], "text": ["The ", {"text": ["Surface SDF"], "type": "ui"}, " will represent the ocean at the specified depth.  \n    This differs from simply offsetting the output surface SDF as it\n    takes into account the ", {"text": ["Depth Falloff"], "type": "ui"}, " setting."]}], "indent": 0, "text": ["Depth"], "role": "item", "extent": [3406, 3414], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3624, 3750], "text": ["Controls the radius of the points used to generate volumes.  Higher values are more expensive but give smoother volumes."]}], "indent": 0, "text": ["Smoothing"], "role": "item", "extent": [3613, 3624], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Surface"], "extent": [3382, 3406], "container": true, "type": "h", "id": "surface"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [3793, 3851], "text": ["Output a field containing the ocean velocity values."]}], "indent": 0, "text": ["Velocity Field"], "role": "item", "extent": [3776, 3793], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3869, 3979], "text": ["When generating velocity volumes, how many voxels from the ocean surface to extrapolate velocity values."]}], "indent": 0, "text": ["Max Extrap Cells"], "role": "item", "extent": [3851, 3869], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Velocity"], "extent": [3750, 3776], "container": true, "type": "h", "id": "velocity"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [4035, 4260], "text": ["Create a small layer around the perimeter of the simulation to maintain surface and velocity. Enabling this layer will decrease the\n    size of the active simulation by the amount specific in the ", {"text": ["Padding"], "type": "ui"}, " parameters."]}], "indent": 0, "text": ["Create Boundary Layer"], "role": "item", "extent": [4011, 4035], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4275, 4436], "text": ["The size of the layer extruded into the simulation from the lower simulation boundaries. Set this parameter to zero to disable the layer on any given axis."]}], "indent": 0, "text": ["Lower Padding"], "role": "item", "extent": [4260, 4275], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4451, 4612], "text": ["The size of the layer extruded into the simulation from the upper simulation boundaries. Set this parameter to zero to disable the layer on any given axis."]}], "indent": 0, "text": ["Upper Padding"], "role": "item", "extent": [4436, 4451], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Boundary Layer"], "extent": [3979, 4011], "container": true, "type": "h", "id": "boundary"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [4655, 4933], "text": ["The type of surface to evaluate, ", {"text": ["Ocean"], "type": "ui"}, " or ", {"text": ["Flat"], "type": "ui"}, ".  The parameters for the ", {"text": ["Ocean"], "type": "ui"}, " type are from an embedded ", {"text": ["Ocean Evaluate"], "fullpath": "/nodes/sop/oceanevaluate", "scheme": "Node", "type": "link", "value": "/nodes/sop/oceanevaluate"}, " SOP. The parameters for the ", {"text": ["Flat"], "type": "ui"}, " type are from an embedded ", {"text": ["Particle Fluid Tank"], "fullpath": "/nodes/sop/particlefluidtank", "scheme": "Node", "type": "link", "value": "/nodes/sop/particlefluidtank"}, " SOP."]}], "indent": 0, "text": ["Type"], "role": "item", "extent": [4648, 4655], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4939, 4993], "text": ["The time at which to evaluate the ocean surface."]}], "indent": 0, "text": ["Time"], "role": "item", "extent": [4933, 4939], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5005, 5389], "text": ["Downsample the incoming ocean spectrum before evaluating any ocean values.  This parameter specifies the number of powers of two to remove from the resolution of the incoming ocean spectrum. For example, if the spectrum was originally specified at resolution 10 to generate a 1024 x 1024 volume, downsampling by 2 will evaluate ocean volumes at resolution 8, a 256 x 256 volume."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [5398, 5708], "text": ["The same high resolution spectrum can be processed by separate ", {"text": ["Ocean Evaluate"], "fullpath": "/nodes/sop/oceanevaluate", "scheme": "Node", "type": "link", "value": "/nodes/sop/oceanevaluate"}, " and ", {"text": ["Ocean Source"], "type": "ui"}, " nodes, for example the former with no downsampling to deform surface geometry, and the latter at a downsampled resolution to generate the more expensive volume or point output."]}], "indent": 4, "role": "item", "type": "tip", "extent": [5389, 5398]}], "container": true, "role": "item_group", "type": "tip_group"}], "indent": 0, "text": ["Downsample"], "role": "item", "extent": [4993, 5005], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5724, 6100], "text": ["Downsample the incoming ocean spectra to the specified maximum resolution before evaluating any ocean values.  This parameter is useful to avoid evaluation of very high-resolution spectra when only requiring simulation data, for example.  It can also be more convenient than the ", {"text": ["Downsample"], "type": "ui"}, " parameter when there are multiple incoming spectra of different resolutions."]}], "indent": 0, "text": ["Max Resolution"], "role": "item", "extent": [5708, 5724], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6115, 6225], "text": ["Specifies how deformation and velocity values falloff as the input points lie below the ocean surface.  "]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [6235, 6284], "text": ["Values do not falloff below the surface."]}], "indent": 4, "type": "dt", "extent": [6225, 6235], "text": ["None"]}, {"body": [{"indent": 8, "type": "para", "extent": [6301, 6373], "text": ["All values have the same exponential falloff below the surface."]}], "indent": 4, "type": "dt", "extent": [6284, 6301], "text": ["Exponential"]}, {"body": [{"indent": 8, "type": "para", "extent": [6403, 6639], "text": ["Values have an exponential falloff that is scaled per wave frequency.  With this setting the contribution from small, high frequency waves falls off very quickly.  It is the most accurate setting and most expensive to compute."]}], "indent": 4, "type": "dt", "extent": [6373, 6403], "text": ["Exponential by Frequency"]}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Depth Falloff"], "role": "item", "extent": [6100, 6115], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6654, 6866], "text": ["An additional scale applied to the exponential falloff modes in ", {"text": ["Depth Falloff"], "type": "ui"}, ".  For the most physically accurate values this should be set to 1 in conjunction with the ", {"text": ["Exponential by Frequency"], "type": "ui"}, " mode."]}], "indent": 0, "text": ["Falloff Scale"], "role": "item", "extent": [6639, 6654], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6883, 7078], "text": ["The number of divisions along the depth axis if the computed ocean are 3D, as specified by the ", {"text": ["Depth Falloff"], "type": "ui"}, " parameter.  Higher values are more accurate but more expensive to calculate."]}], "indent": 0, "text": ["Depth Divisions"], "role": "item", "extent": [6866, 6883], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [7102, 7626], "text": ["When generating volumes and points, this node needs to calculate the maximum horizontal and vertical displacement in the input ocean waves.  If this parameter is enabled, the displacement will be estimated only once at the specified frame, which is fast, gives a stable point output, and it typically accurate enough for good results.  However, in the case of animated wave amplitudes or quickly varying instacing geometry, it may be necessary to continuously re-calculate the displacement by disabling this parameter."]}], "indent": 0, "text": ["Max Displacement Frame"], "role": "item", "extent": [7078, 7102], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [7643, 7899], "text": ["Scatter points on the surface of the tank, which can help create flat surface for a FLIP simulation.  For a value of 1 the scattered points will be approximately separated by ", {"text": ["Particle Separation"], "type": "ui"}, ". Increasing this value will oversample the surface."]}], "indent": 0, "text": ["Scatter Density"], "role": "item", "extent": [7626, 7643], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [7923, 8115], "text": ["The points will be oversampled to this distance from the the surface of the tank if ", {"text": ["Oversampling"], "type": "ui"}, " is enabled.  This parameter is specified in multiples of the ", {"text": ["Particle Separation"], "type": "ui"}, "."]}], "indent": 0, "text": ["Oversampling Bandwidth"], "role": "item", "extent": [7899, 7923], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Surface Evaluation"], "extent": [4612, 4648], "container": true, "type": "h", "id": "evaluate"}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "extent": [1956, 1968], "container": true, "type": "parameters_section", "id": "parameters"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [8139, 8233], "text": ["The Ocean Spectrum volume to evaluate when the ", {"text": ["Surface Evaluation"], "type": "ui"}, " type is ", {"text": ["Ocean"], "type": "ui"}, "."]}], "indent": 0, "type": "dt", "extent": [8123, 8139], "text": ["Ocean Spectrum"]}, {"body": [{"indent": 4, "type": "para", "extent": [8253, 8326], "text": ["Geometry used to cull particles and volumes from within collisions."]}], "indent": 0, "type": "dt", "extent": [8233, 8253], "text": ["Collision Geometry"]}], "container": true, "type": "dt_group"}], "indent": 0, "level": 1, "text": "Inputs", "role": "section", "extent": [8115, 8123], "container": true, "type": "inputs_section", "id": "inputs"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [8344, 8464], "text": ["The Initial output returns geometry consisting of particles used to initialize a ", {"text": ["FLIP Object"], "fullpath": "/nodes/dop/flipobject", "scheme": "Node", "type": "link", "value": "/nodes/dop/flipobject"}, "."]}], "indent": 0, "type": "dt", "extent": [8335, 8344], "text": ["Initial"]}, {"body": [{"indent": 4, "type": "para", "extent": [8474, 8715], "text": ["The Maintain output returns a volume for the ocean surface and velocity fields when the ", {"text": ["Surface Evaluation"], "type": "ui"}, " type is ", {"text": ["Ocean"], "type": "ui"}, ".\n    These volumes are used in the boundary layer to maintain the ocean dynamics throughout the simulation."]}], "indent": 0, "type": "dt", "extent": [8464, 8474], "text": ["Maintain"]}], "container": true, "type": "dt_group"}], "indent": 0, "level": 1, "text": "Outputs", "role": "section", "extent": [8326, 8335], "container": true, "type": "outputs_section", "id": "outputs"}, {"body": [{"body": [{"indent": 0, "blevel": 2, "type": "bullet", "extent": [8724, 8767], "text": [{"text": ["Ocean Spectrum"], "fullpath": "/nodes/sop/oceanspectrum", "scheme": "Node", "type": "link", "value": "/nodes/sop/oceanspectrum"}]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [8767, 8809], "text": [{"text": ["Ocean Evaluate"], "fullpath": "/nodes/sop/oceanevaluate", "scheme": "Node", "type": "link", "value": "/nodes/sop/oceanevaluate"}]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [8809, 8860], "text": [{"text": ["Particle Fluid Tank"], "fullpath": "/nodes/sop/particlefluidtank", "scheme": "Node", "type": "link", "value": "/nodes/sop/particlefluidtank"}]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [8860, 8887], "text": [{"text": ["Volume"], "fullpath": "/nodes/sop/volume", "scheme": "Node", "type": "link", "value": "/nodes/sop/volume"}]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [8887, 8936], "text": [{"text": ["Points from Volume"], "fullpath": "/nodes/sop/pointsfromvolume", "scheme": "Node", "type": "link", "value": "/nodes/sop/pointsfromvolume"}]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [8936, 8972], "text": [{"text": ["FLIP Object"], "fullpath": "/nodes/dop/flipobject", "scheme": "Node", "type": "link", "value": "/nodes/dop/flipobject"}]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [8972, 9008], "text": [{"text": ["FLIP Solver"], "fullpath": "/nodes/dop/flipsolver", "scheme": "Node", "type": "link", "value": "/nodes/dop/flipsolver"}]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 1, "text": "Related", "role": "section", "extent": [8715, 8724], "container": true, "type": "related_section", "id": "related"}], "summary": ["Generates particles and volumes from ocean \"spectrum\" volumes for use in simulations"], "type": "root", "attrs": {"version": "2.0", "namespace": null, "internal": "oceansource::2.0", "context": "sop", "type": "node", "icon": "SHELF/wave_tank"}, "title": ["Ocean Source"]}